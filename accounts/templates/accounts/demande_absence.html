{% load bootstrap4 %}
{% bootstrap_css %}
{% bootstrap_javascript jquery='full' %}
{{ form.media }}
<html>
<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/timepicker/1.3.5/jquery.timepicker.min.css">
  <title>FormDen Example</title>
</head>

    <body>
    <!--formden.js communicates with FormDen server to validate fields and submit via AJAX -->
<script type="text/javascript" src="https://formden.com/static/cdn/formden.js"></script>

<!-- Special version of Bootstrap that is isolated to content wrapped in .bootstrap-iso -->
<link rel="stylesheet" href="https://formden.com/static/cdn/bootstrap-iso.css" />

<!--Font Awesome (added because you use icons in your prepend/append)-->
<link rel="stylesheet" href="https://formden.com/static/cdn/font-awesome/4.4.0/css/font-awesome.min.css" />

<!-- Inline CSS based on choices in "Settings" tab -->
<style>.bootstrap-iso .formden_header h2, .bootstrap-iso .formden_header p, .bootstrap-iso form{font-family: Arial, Helvetica, sans-serif; color: black}.bootstrap-iso form button, .bootstrap-iso form button:hover{color: white !important;} .asteriskField{color: red;}</style>
<script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<!-- Include Date Range Picker -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/js/bootstrap-datepicker.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/css/bootstrap-datepicker3.css"/>
<script src="//cdnjs.cloudflare.com/ajax/libs/timepicker/1.3.5/jquery.timepicker.min.js"></script>

<!-- jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>


<div class="bootstrap-iso">
 <div class="container-fluid">
  <div class="row">
   <div class="col-md-6 col-sm-6 col-xs-12">
    <form class="form-horizontal" method="post" id="id_form">
      {% csrf_token %}

     <div class="form-group ">
      <div class="col-sm-10">
       <div class="input-group">
        <label for="Heurs d'absence">Heurs d'absence</label>
        <input class="form-control" type="time"  id="h_absence" name="h_absence">
       </div>
      </div>
     </div>

     <div class="form-group ">
      <div class="col-sm-10">
       <div class="input-group">
        <label for="SELECT">Periode</label>
          <select class="form-control" id="periode" name="periode">
            <option ></option>
            <option value="matiné">Matiné</option>
            <option value="apres_midis">Apres midi</option>
          </select>
      </div>
     </div>
  </div>




     <div class="form-group " >
      <div class="col-sm-10">
       <div class="input-group">
       <label for="nbrjour">Nombre des heurs </label>
        <input class="form-control" id="nbr_heurs"   name="nbr_heurs" type="number"  />
      </div>
        
          <div id="danger"> </div>
        </div>
     </div>

     <div class="form-group">
      <div class="col-sm-10 col-sm-offset-2">       
       <button class="btn btn-primary " name="submit" type="submit" id="submit" >
        Submit
       </button>
            </div>
            </div>
            </form>
        </div>
        </div>
        </div>
        </div>
    </form>
   </div>
  </div>
 </div>
</div>
<!-- Extra JavaScript/CSS added manually in "Settings" tab -->
<!-- Include jQuery -->
<script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<!-- Include Date Range Picker -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/js/bootstrap-datepicker.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/css/bootstrap-datepicker3.css"/>



<script type="text/javascript">
$(document).ready(function(){
    
    var nbr_heurs = $('#nbr_heurs')
     

    nbr_heurs.keyup(function(){
        if($(this).val()< 0 || $(this).val()> 3 ){ // si le nombre de jours est inférieure à 0
            $("#danger").html("<div class=\"alert alert-danger alert-dismissible\"><a href=\"#\" class=\"close\" data-dismiss=\"alert\" aria-label=\"close\">&times;</a>\"\"<strong>Attention!</strong> Vous pouvez s'absenter pour 3 heurs aux maximum.</div>");
            $(this).css({ // on rend le champ rouge
          borderColor : 'red',
	        color : 'red',
            });
        }

         else{
           $("#danger").html("<div class=\"alert alert-success alert-dismissible\"><button type=\"button\" class=\"close\" data-dismiss=\"alert\">&times;</button><strong>Success!</strong> This alert box could indicate a successful or positive action.");
             $(this).css({ // si tout est bon, on le rend vert
               borderColor : 'green',
	             color : 'green'
	     });
       
         }
    });
  
//Ajax code 
    $.ajax({
      type:'POST',
      url:"{% url 'demande_absence' %}",
     
      data:{
        heurs_absence:$('#h_absence').val(),
        periode:$('#periode').val(),
        nbr_heurs:$('#nbr_heurs').val(),
        csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val(),
      },
    });
  });



</script>
    </body>
</html>